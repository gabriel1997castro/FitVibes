## üé® **Descri√ß√£o Completa para o Design do App ‚Äî FitVibes**

---

### üèãÔ∏è‚Äç‚ôÇÔ∏è **Nome do App:**

**FitVibes**

---

### üåü **Objetivo do App:**

FitVibes √© um aplicativo social e gamificado para incentivar grupos de pessoas (amigos, fam√≠lia, colegas) a manterem uma rotina de exerc√≠cios f√≠sicos. O app combina humor, press√£o social positiva, desafios e recompensas simb√≥licas.

---

### üßë‚Äçüíª **Personas (p√∫blico-alvo):**

* Jovens adultos
* Pessoas que querem incentivo para se exercitar
* Grupos de amigos, times, fam√≠lias e empresas
* P√∫blico que gosta de apps de desafio, gamifica√ß√£o, h√°bitos e sa√∫de

---

### üö© **Fluxo Principal do Usu√°rio:**

---

### **1. Tela de Boas-vindas / Login**

* Logo e nome: **FitVibes**
* Slogan: **"Treine com a galera, entre na vibe fit!"**
* Op√ß√µes de login:

  * Google
  * Apple
  * E-mail
* Visual colorido, com fundo vibrante (exemplo: laranja ou roxo)

---

### **2. Tela de Lista de Grupos (Home)**

* Lista dos grupos do usu√°rio (cards com nome, n√∫mero de membros e alerta de pend√™ncias)
* Bot√µes:

  * **Criar novo grupo**
  * **Entrar com convite**
* Notifica√ß√£o de pend√™ncia: Exemplo: **"Voc√™ ainda n√£o postou hoje!"**
* Destaque visual para grupos com vota√ß√£o pendente ou saldo pendente
* Acesso ao saldo geral

---

### **3. Tela de Cria√ß√£o de Grupo**

* Campos para:

  * Nome do grupo
  * Cor ou tema do grupo (opcional)
  * √çcone ou emoji do grupo
  * Valor da penalidade simb√≥lica por migu√© (ex: R\$1,00 por voto inv√°lido)
  * Frequ√™ncia de fechamento de ciclo de pagamento: semanal ou mensal
* Bot√£o **"Criar Grupo"**
* Confirma√ß√£o de sucesso

---

### **4. Tela de Configura√ß√£o do Grupo**

* Op√ß√µes para o administrador:

  * Editar nome do grupo
  * Alterar valor das penalidades
  * Gerenciar membros (expulsar ou convidar)
  * Alterar frequ√™ncia de ciclo de pagamento
  * Link de convite para compartilhar com novos membros
* Bot√£o: **"Salvar configura√ß√µes"**

---

### **5. Tela do Grupo (Detalhes)**

* Nome e imagem do grupo
* Lista de membros com status di√°rio:

  * ‚úîÔ∏è Treinou
  * ‚ùå Deu desculpa
  * ‚è∞ N√£o postou (gera migu√© autom√°tico)
* Bot√£o: **"Postar atividade ou desculpa"**
* Saldo financeiro (quanto cada um deve)
* Ranking semanal:

  * Mais esfor√ßado
  * Rei do Migu√©
  * Melhor desculpa
* Hist√≥rico de postagens recentes
* Bot√£o: **"Ver ranking completo"**

---

### **6. Tela de Postagem**

* Pergunta: **"Voc√™ treinou hoje?"**
* Se SIM:

  * Tipo de exerc√≠cio (dropdown): Caminhada, Corrida, Nata√ß√£o, etc.
  * Dura√ß√£o (campo num√©rico ou slider)
  * Bot√£o: **"Enviar"**
* Se N√ÉO:

  * Motivo da desculpa (escolha entre categorias pr√©-definidas):
    Ex: Atestado m√©dico, Viagem, Evento importante, Cansa√ßo, etc.
  * Bot√£o: **"Enviar"**
* Caso o usu√°rio n√£o poste at√© o final do dia, o app posta automaticamente:
  **"Hoje n√£o treinei porque fui muito migu√©!"**

---

### **7. Tela de Vota√ß√£o**

* Lista de posts de todos os membros no dia
* Para cada membro:

  * Card com o exerc√≠cio ou desculpa
  * Bot√µes: **"V√°lido"** ou **"Migu√©"**
  * Campo para escolher um coment√°rio pr√©-definido (ex: "Desculpa esfarrapada", "Boa, continue assim!", "Bora amanh√£!")
* Exibi√ß√£o de votos pendentes
* Push notification se o usu√°rio esquecer de votar

---

### **8. Tela de Ranking**

* Pontua√ß√£o geral acumulada
* Quantidade de dias seguidos sem migu√©
* Ranking dos √∫ltimos 7 dias
* T√≠tulos simb√≥licos:

  * ü•á Mais Esfor√ßado
  * ü§° Rei do Migu√©
  * üß† Melhor Desculpa
* Hist√≥rico detalhado por dia

---

### **9. Tela de Saldos/Pagamentos**

* Lista de quanto cada um deve a quem
* Saldo por ciclo (semanal ou mensal)
* Bot√£o: **"Marcar pagamento como feito"** (controle apenas, sem transa√ß√£o real)
* Notifica√ß√£o de fechamento de ciclo

---

### **10. Telas Complementares**

* **Notifica√ß√µes push**

  * Lembretes de postar
  * Lembretes de votar
  * Fechamento de ciclo
  * Novos membros no grupo
* **Perfil do Usu√°rio** (futuro):

  * Hist√≥rico pessoal
  * Foto/avatar
  * Estat√≠sticas pr√≥prias

---

## üìö Contexto T√©cnico ‚Äî FitVibes

Este arquivo re√∫ne o esquema de banco de dados e a estrutura de pastas recomendada para o app FitVibes, com base nos requisitos de gamifica√ß√£o, grupos, postagens, vota√ß√µes, rankings e saldos.

---

## üìä Database Schema

### Users Table
```sql
CREATE TABLE users (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    email VARCHAR(255) UNIQUE NOT NULL,
    name VARCHAR(255) NOT NULL,
    avatar_url TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    last_login TIMESTAMP WITH TIME ZONE,
    notification_token TEXT,
    points INTEGER DEFAULT 0,
    global_streak_days INTEGER DEFAULT 0,
    global_streak_record INTEGER DEFAULT 0
);
```

### Groups Table
```sql
CREATE TABLE groups (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    name VARCHAR(255) NOT NULL,
    description TEXT,
    theme_color VARCHAR(7),
    emoji VARCHAR(10),
    penalty_amount DECIMAL(10,2) DEFAULT 1.00,
    payment_cycle VARCHAR(10) CHECK (payment_cycle IN ('weekly', 'monthly')),
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    created_by UUID REFERENCES users(id)
);
```

### Group Members Table
```sql
CREATE TABLE group_members (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    group_id UUID REFERENCES groups(id),
    user_id UUID REFERENCES users(id),
    role VARCHAR(20) CHECK (role IN ('admin', 'member')),
    joined_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    points INTEGER DEFAULT 0,
    streak_days INTEGER DEFAULT 0,
    UNIQUE(group_id, user_id)
);
```

### Activities Table
```sql
CREATE TABLE activities (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    group_id UUID REFERENCES groups(id),
    user_id UUID REFERENCES users(id),
    type VARCHAR(20) CHECK (type IN ('exercise', 'excuse', 'auto_excuse')),
    exercise_type VARCHAR(50),
    duration_minutes INTEGER,
    excuse_category VARCHAR(50),
    excuse_text TEXT,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    date DATE NOT NULL,
    status VARCHAR(20) DEFAULT 'pending' CHECK (status IN ('pending', 'valid', 'invalid')),
    UNIQUE(group_id, user_id, date)
);
```

### Votes Table
```sql
CREATE TABLE votes (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    activity_id UUID REFERENCES activities(id),
    voter_id UUID REFERENCES users(id),
    is_valid BOOLEAN NOT NULL,
    comment_type VARCHAR(50),
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(activity_id, voter_id)
);
```

### Balances Table
```sql
CREATE TABLE balances (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    group_id UUID REFERENCES groups(id),
    user_id UUID REFERENCES users(id),
    owed_to_user_id UUID REFERENCES users(id),
    amount DECIMAL(10,2) NOT NULL,
    cycle_start_date DATE NOT NULL,
    cycle_end_date DATE NOT NULL,
    status VARCHAR(20) DEFAULT 'pending' CHECK (status IN ('pending', 'paid')),
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);
```

### Group Invites Table
```sql
CREATE TABLE group_invites (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    group_id UUID REFERENCES groups(id),
    invited_by UUID REFERENCES users(id),
    invite_code VARCHAR(20) UNIQUE NOT NULL,
    expires_at TIMESTAMP WITH TIME ZONE,
    created_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP,
    used_at TIMESTAMP WITH TIME ZONE,
    used_by UUID REFERENCES users(id)
);
```

### Achievements Table
```sql
CREATE TABLE achievements (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    user_id UUID REFERENCES users(id),
    group_id UUID REFERENCES groups(id),
    type VARCHAR(50) NOT NULL,
    title VARCHAR(100) NOT NULL,
    description TEXT,
    earned_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);
```

---

## üîÑ Database Relationships

- **One-to-Many:**
  - User ‚Üí Activities (one user can have many activities)
  - Group ‚Üí Activities (one group can have many activities)
  - Group ‚Üí Group Members (one group can have many members)
  - Activity ‚Üí Votes (one activity can have many votes)
- **Many-to-Many:**
  - Users ‚Üî Groups (through group_members)
  - Users ‚Üî Activities (through votes)
- **One-to-One:**
  - Activity ‚Üí Balance (each activity may result in one balance entry)
  - User ‚Üí Daily Activity (one user can have one activity per day per group)

---

## üîë Indexes and Performance

```sql
-- User lookups
CREATE INDEX idx_users_email ON users(email);
-- Group member lookups
CREATE INDEX idx_group_members_group_id ON group_members(group_id);
CREATE INDEX idx_group_members_user_id ON group_members(user_id);
-- Activity lookups
CREATE INDEX idx_activities_group_id_date ON activities(group_id, date);
CREATE INDEX idx_activities_user_id_date ON activities(user_id, date);
-- Vote lookups
CREATE INDEX idx_votes_activity_id ON votes(activity_id);
CREATE INDEX idx_votes_voter_id ON votes(voter_id);
-- Balance lookups
CREATE INDEX idx_balances_group_id_cycle ON balances(group_id, cycle_start_date, cycle_end_date);
CREATE INDEX idx_balances_user_id ON balances(user_id);
```

---

## üèÜ Achievements System

### Streak Types
1. **Global Streak**: Tracks consecutive days where user posted in at least one group
   - Stored in `users.global_streak_days`
   - Record stored in `users.global_streak_record`
   - Only increments once per day, regardless of how many groups user posted in

2. **Group Streak**: Tracks consecutive days of valid activities in a specific group
   - Stored in `group_members.streak_days`
   - Each group has its own streak counter

### Achievement Triggers
- **Global Streak Achievements**: Triggered when `global_streak_days` reaches thresholds (1, 7, 14, 30, 60, 100)
- **Group Streak Achievements**: Triggered when `group_members.streak_days` reaches thresholds (1, 7, 14, 30, 60, 100)
- **Variety Achievements**: Triggered when user tries different exercise types
- **Social Achievements**: Triggered by voting participation, group leadership, etc.

### Multi-Group Posting
- Users can select multiple groups when posting an activity
- Backend creates separate activity records for each selected group
- Each group votes independently on their respective activity
- Global streak only increments once per day if user posted in at least one group

## üìÅ Folder Structure

```
fitvibes/
‚îú‚îÄ‚îÄ app/                      # App entry point and configuration
‚îÇ   ‚îú‚îÄ‚îÄ index.tsx             # Main entry (welcome/login)
‚îÇ   ‚îú‚îÄ‚îÄ _layout.tsx           # Expo Router layout
‚îÇ   ‚îú‚îÄ‚îÄ store.ts              # Zustand store configuration
‚îÇ   ‚îú‚îÄ‚îÄ theme.ts              # Theme configuration
‚îÇ   ‚îú‚îÄ‚îÄ services/             # API and external services
‚îÇ   ‚îú‚îÄ‚îÄ screens/              # Screen components (auth, groups, activities, profile)
‚îÇ   ‚îú‚îÄ‚îÄ components/           # Reusable UI components
‚îÇ   ‚îú‚îÄ‚îÄ features/             # Feature-specific logic (auth, groups, activities, voting, achievements)
‚îÇ   ‚îú‚îÄ‚îÄ hooks/                # Custom React hooks
‚îÇ   ‚îú‚îÄ‚îÄ navigation/           # Navigation configuration
‚îÇ   ‚îú‚îÄ‚îÄ store/                # Zustand/state management
‚îÇ   ‚îú‚îÄ‚îÄ types/                # TypeScript type definitions
‚îÇ   ‚îî‚îÄ‚îÄ utils/                # Utility functions
‚îú‚îÄ‚îÄ android/                  # Android specific files
‚îú‚îÄ‚îÄ ios/                      # iOS specific files
‚îú‚îÄ‚îÄ __tests__/                # Test files
‚îú‚îÄ‚îÄ .env                      # Environment variables
‚îú‚îÄ‚îÄ app.json                  # Expo configuration
‚îú‚îÄ‚îÄ babel.config.js           # Babel configuration
‚îú‚îÄ‚îÄ package.json              # Dependencies and scripts
‚îú‚îÄ‚îÄ tsconfig.json             # TypeScript configuration
‚îî‚îÄ‚îÄ README.md                 # Project documentation
``` 

## üöÄ Development Roadmap

### Phase 1: Project Setup and Authentication (Week 1)
1. **Initial Setup**
   - Initialize React Native project with Expo
   - Set up TypeScript configuration
   - Configure ESLint and Prettier
   - Set up folder structure
   - Initialize Git repository

2. **Database Setup**
   - Set up PostgreSQL database
   - Create initial tables (users, groups)
   - Set up database migrations
   - Configure connection pooling

3. **Authentication System**
   - Implement user registration
   - Implement login with email/password
   - Add social login (Google, Apple)
   - Set up JWT authentication
   - Create protected routes

### Phase 2: Core Features - Groups (Week 2)
1. **Group Management**
   - Create group creation flow
   - Implement group settings
   - Add group member management
   - Create group invite system
   - Implement group search

2. **Group UI**
   - Design and implement group list screen
   - Create group detail screen
   - Add group settings screen
   - Implement group member list
   - Add group invite UI

### Phase 3: Activities and Posts (Week 3)
1. **Activity System**
   - Create activity posting flow
   - Implement exercise type selection
   - Add duration tracking
   - Create excuse system
   - Implement auto-excuse feature

2. **Activity UI**
   - Design activity feed
   - Create activity posting screen
   - Implement activity detail view
   - Add activity history
   - Create activity statistics

### Phase 4: Voting System (Week 4)
1. **Voting Logic**
   - Implement voting mechanism
   - Create vote validation
   - Add comment system
   - Implement vote notifications
   - Create vote history

2. **Voting UI**
   - Design voting interface
   - Create vote confirmation
   - Add vote results view
   - Implement vote notifications
   - Create vote statistics

### Phase 5: Balance and Payments (Week 5)
1. **Balance System**
   - Implement balance tracking
   - Create payment cycle system
   - Add balance calculations
   - Implement payment marking
   - Create balance notifications

2. **Balance UI**
   - Design balance screen
   - Create payment history
   - Add balance statistics
   - Implement payment marking UI
   - Create balance notifications

### Phase 6: Gamification and Achievements (Week 6)
1. **Achievement System**
   - Implement achievement logic
   - Create achievement types
   - Add achievement triggers
   - Implement streak system
   - Create achievement notifications

2. **Achievement UI**
   - Design achievement screen
   - Create achievement badges
   - Add achievement progress
   - Implement achievement notifications
   - Create achievement statistics

### Phase 7: Testing and Optimization (Week 7)
1. **Testing**
   - Write unit tests
   - Implement integration tests
   - Add end-to-end tests
   - Perform security testing
   - Conduct performance testing

2. **Optimization**
   - Optimize database queries
   - Implement caching
   - Add performance monitoring
   - Optimize image loading
   - Implement lazy loading

### Phase 8: Deployment and Launch (Week 8)
1. **Deployment**
   - Set up production environment
   - Configure CI/CD pipeline
   - Set up monitoring
   - Configure backups
   - Set up SSL certificates

2. **Launch Preparation**
   - Create app store listings
   - Prepare marketing materials
   - Set up analytics
   - Create user documentation
   - Plan launch strategy

### Phase 9: Post-Launch (Ongoing)
1. **Monitoring and Maintenance**
   - Monitor app performance
   - Track user feedback
   - Fix reported bugs
   - Implement improvements
   - Update documentation

2. **Feature Expansion**
   - Plan new features
   - Implement user requests
   - Add premium features
   - Expand social features
   - Add new gamification elements

## üìã Development Guidelines

### Code Standards
- Follow TypeScript best practices
- Use functional components with hooks
- Implement proper error handling
- Write comprehensive documentation
- Follow Git flow branching strategy

### Testing Requirements
- Maintain 80% code coverage
- Write tests for all new features
- Perform regular security audits
- Conduct performance testing
- Test on multiple devices

### Documentation
- Keep README updated
- Document all API endpoints
- Maintain changelog
- Create user guides
- Document deployment process

### Performance Targets
- App launch < 2 seconds
- Screen transitions < 300ms
- API response time < 200ms
- Offline functionality
- Battery usage optimization 